# REQ-TOOL-1.0: ナビゲーション自動生成機能 <a id="REQ-TOOL-1.0"></a>

## 1. 機能概要

`Docs/`フォルダ内のディレクトリ構造とファイル名をスキャンし、`mkdocs.yml`の`nav:`セクションを自動で生成・更新する機能。
これにより、ドキュメントの追加・削除時に`mkdocs.yml`を手動で編集する手間をなくし、ヒューマンエラーを防ぐことを目的とする。

## 2. 詳細な機能要件

### REQ-TOOL-1.1: コマンドによる実行 <a id="REQ-TOOL-1.1"></a>
-   CLIツールとして、コマンドラインから機能を実行できること。
-   例: `npm run update-nav` または `npx devb-cli update-nav`

### REQ-TOOL-1.2: 階層構造の自動認識 <a id="REQ-TOOL-1.2"></a>
-   `Docs/`フォルダ以下のサブディレクトリを再帰的にスキャンし、ナビゲーションの階層構造を自動で認識すること。

### REQ-TOOL-1.3: 数値プレフィックスによる自動ソート <a id="REQ-TOOL-1.3"></a>
-   ファイル名およびフォルダ名の先頭にある`NN_`（2桁の数字とアンダースコア）をプレフィックスとして認識し、ナビゲーション項目をその数値順に並べ替えること。

### REQ-TOOL-1.4: `README.md`の特別扱い <a id="REQ-TOOL-1.4"></a>
-   `README.md`という名前のファイルを、そのフォルダの「トップページ（概要）」として認識し、ナビゲーション階層の親項目に設定すること。
-   **例:** `Docs/02_設計仕様/README.md` は、ナビゲーション上で以下のように表現される。
    ```yaml
    - 設計仕様: 02_設計仕様/README.md
    ```

### REQ-TOOL-1.5: ナビゲーション表示名の決定 <a id="REQ-TOOL-1.5"></a>
-   ナビゲーションに表示される各項目の名前は、以下の**優先順位**に従って決定されること。

    1.  **優先度1 (最高): ファイル内のフロントマター**
        -   Markdownファイルの先頭にあるYAMLフロントマターに`title:`キーが存在する場合、その値を**最優先**で使用する。
        -   **例 (`01_ブランチ戦略.md`内):**
            ```yaml
            ---
            title: Gitブランチ戦略
            ---
            ```
            → ナビゲーションには「Gitブランチ戦略」と表示される。

    2.  **優先度2 (デフォルト): ファイル名からの自動生成**
        -   フロントマターに`title:`キーが存在しない場合、ファイル名から表示名を自動生成する。
        -   **自動生成ルール:**
            1.  ファイルの拡張子 (`.md`) を除去する。
            2.  先頭の数値プレフィックス (`NN_`) を除去する。
            3.  残った文字列に含まれる全てのアンダースコア (`_`) を半角スペースに置換する。
            4.  文字列の前後に存在する余分なスペースを除去（トリム）する。
        -   **例:**
            *   `01_ブランチ戦略.md` → `ブランチ戦略`
            *   `02_コーディング_規約.md` → `コーディング 規約`

### REQ-TOOL-1.6: `mkdocs.yml`への書き込み <a id="REQ-TOOL-1.6"></a>
-   生成されたナビゲーション構造を、リポジトリルートの`mkdocs.yml`ファイルに自動で書き込むこと。
-   `nav:`セクション全体を、生成された内容で上書きする。

## 3. 非機能要件

### NFR-TOOL-1.1: 実行速度 <a id="NFR-TOOL-1.1"></a>
-   ドキュメント数が数百ファイル程度の場合でも、数秒以内に処理が完了すること。

### NFR-TOOL-1.2: 互換性 <a id="NFR-TOOL-1.2"></a>
-   Node.js + TypeScriptで実装し、主要なOS（Windows, macOS, Linux）のLTSバージョンのNode.jsで動作すること。

---
> **関連Issue:** #16, #21

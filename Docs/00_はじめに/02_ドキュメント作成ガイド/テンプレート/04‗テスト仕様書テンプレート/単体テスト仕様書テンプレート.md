# [章番号]: [クラス名/メソッド名] 単体テスト仕様書

<!-- prettier-ignore -->
!!! note "このテンプレートの使い方"
  このファイルは、クラスやメソッド単体のテスト仕様を定義するためのテンプレートです。
  「テストコードこそが仕様書」の原則に基づき、ここではテストの「戦略」と「シナリオ」を定義することに重点を置きます。
  詳しい使い方は「[テスト仕様の書き方ガイド](ここにガイドへのパスを記述してください)」を参照してください。

## 1. はじめに

### 1.1. 目的

<!-- このテストが何を保証するためのものかを記述します。（例: `PasswordValidator` クラスが、パスワードポリシーに関する全ての要件を正しく検証できることを保証する） -->

### 1.2. テスト対象

- **クラス/メソッド:** `[例: Core.Validators.PasswordValidator]`
- **テスト方針:**
  - 正常系、異常系、境界値のテストを網羅する。
  - 外部依存（例: `IDatabase`）はモック化し、`PasswordValidator` のロジックのみに集中する。

## 2. テストケース

<!-- ここに、検証すべきシナリオをテーブル形式でリストアップします。コードの詳細ではなく、「観点」を記述します。 -->

### 2.1. パスワード検証 (`Validate`メソッド)

| ケースID            | テスト項目/シナリオ                | 入力値 (例)         | 期待される結果                                    | 関連要件           |
| :------------------ | :--------------------------------- | :------------------ | :------------------------------------------------ | :----------------- |
| **正常系**          |                                    |                     |                                                   |                    |
| `TC-PASS-VALID-001` | 全ての要件を満たす有効なパスワード | `"Abcdefg123!"`     | `true`が返る                                      | `[FUNC-AUTH-1-1]`  |
| **異常系 (長さ)**   |                                    |                     |                                                   |                    |
| `TC-PASS-LEN-001`   | パスワードが短すぎる               | `"Abc1!"`           | `false`が返る (または`PasswordTooShortException`) | `[FUNC-AUTH-1-1]`  |
| **異常系 (文字種)** |                                    |                     |                                                   |                    |
| `TC-PASS-CHAR-001`  | 大文字が含まれない                 | `"abcdefg123!"`     | `false`が返る                                     | `[FUNC-AUTH-1-1]`  |
| `TC-PASS-CHAR-002`  | 数字が含まれない                   | `"Abcdefgh!"`       | `false`が返る                                     | `[FUNC-AUTH-1-1]`  |
| **境界値**          |                                    |                     |                                                   |                    |
| `TC-PASS-EDGE-001`  | ちょうど最小要件の長さのパスワード | `"Abcde1!"` (8文字) | `true`が返る                                      | `[FUNC-AUTH-1-1]`  |
| `TC-PASS-EDGE-002`  | `null`または空文字列               | `null`              | `ArgumentNullException`がスローされる             | `[NFR-ROBUST-1-0]` |

---

### テストコードでの実装例

```csharp
// PasswordValidator.Tests.cs

public class PasswordValidatorTests
{
    // ケースID: TC-PASS-VALID-001
    [Fact]
    public void Validate_WhenPasswordIsValid_ShouldReturnTrue()
    {
        // Arrange
        var validator = new PasswordValidator();
        var validPassword = "Abcdefg123!";

        // Act
        var result = validator.Validate(validPassword);

        // Assert
        Assert.True(result);
    }

    // ケースID: TC-PASS-LEN-001
    [Fact]
    public void Validate_WhenPasswordIsTooShort_ShouldReturnFalse()
    {
        // Arrange
        var validator = new PasswordValidator();
        var shortPassword = "Abc1!";

        // Act
        var result = validator.Validate(shortPassword);

        // Assert
        Assert.False(result);
    }

    // ... 以下、他のテストケースを実装 ...
}
```

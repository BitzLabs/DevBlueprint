# 01.基本規定

本規定は、プロジェクト内のドキュメント作成における基本的なルールを定めます。

!!!
note本規定は、ドキュメント全体の体系を定めるものです。ナビゲーションやレビューに関する詳細は、以下の各規定を参照してください。

```markdown
- [02.ナビゲーション規定](./02_ナビゲーション規定.md)
- [03.レビュー規定](./03_レビュー規定.md)
```

## 1. 基本方針

- **明確性:**
  ドキュメントは、対象読者が容易に理解できるよう、明確かつ簡潔な言葉で記述します。
- **一貫性:** 用語、書式、構造などにおいて、プロジェクト全体で一貫性を保ちます。
- **保守性:**
  将来的な変更や更新が容易に行えるよう、構造化されたドキュメントを作成します。
- **自己完結性:**
  可能な限り、このドキュメントサイト内で情報が完結することを目指します。

## 2. ファイルとフォルダ

### 2.1. 命名規則

- **ファイル形式:** Markdown形式 (`.md`) を使用します。
- **エンコーディング:** UTF-8 (BOMなし) を使用します。
- **命名規則:**
  - ファイル名およびフォルダ名は、**半角英数字、ハイフン (`-`)、アンダースコア (`_`)**
    を基本とします。スペースは使用しません。
  - 主要なドキュメントやカテゴリフォルダには、`01_`のような**2桁の数字プレフィックス**を付け、順序を明確にします。
  - 内容の理解を助けるため、ファイル名に日本語を含めることもできます。（例:
    `01_認証機能.md`）
  - 各カテゴリフォルダの案内ページとなるファイル名は **`README.md`**
    に統一します。

### 2.2. ファイル名と要求IDの関係

- ファイル名は、人間がその**内容を理解しやすい**ように命名します。（例:
  `01_認証機能.md`）
- 要求ID (`REQ-XXX-X.X`など) は、原則として**ファイル名には含めません。**
- 要求IDは、ファイルの**中身**の見出しや本文で定義・参照します。

## 3. 要求IDによるトレーサビリティ

プロジェクト全体の成果物の追跡可能性（トレーサビリティ）を確保するため、**要求ID**を定義し、その利用ルールを定めます。

### 3.1. 命名規則

- 要求仕様書で定義される各要件には、プロジェクト内で一意のIDを付与します。
- **フォーマット:** `[種別]-[カテゴリ]-[メジャー番号].[マイナー番号]`
  - **種別:** `REQ`(機能要件), `NFR`(非機能要件), `UI`(UI/UX要件)など。
  - **カテゴリ:** 機能を示す3〜4文字の略称 (例: `AUTH`, `USER`, `POST`)。
  - **メジャー番号:** 機能の大きな塊を表す番号 (例: `1`, `2`, `3`...)。
  - **マイナー番号:** メジャー番号に属する詳細な要求を表す番号 (例: `0`, `1`,
    `2`...)。`.0` は親となる概要要求に使うことを推奨。
- **具体例:**
  - `REQ-AUTH-1.0`: ログイン機能全体の要求。
  - `REQ-AUTH-1.1`: パスワードポリシーに関する要求。
  - `REQ-AUTH-1.2`: アカウントロックに関する要求。

### 3.2. ドキュメント内での定義と参照

#### 定義方法

要求仕様書で要件を定義する際は、対応する見出しに **属性リスト (Attribute
List) 構文**
を使って、一意のIDをアンカーとして設定します。これにより、クリーンなMarkdown構文のまま、直接リンク可能なIDを埋め込むことができます。

```markdown
### 1.1. パスワードポリシー { #REQ-AUTH-1.1 }

パスワードは8文字以上で、大文字、小文字、数字をそれぞれ1文字以上含む必要があります。
```

!!! warning "注意: `attr_list`の有効化" 見出しに `{ #... }`
形式でIDを付与するには、`mkdocs.yml` の `markdown_extensions` に `attr_list`
が設定されている必要があります。

#### 参照方法

他のMarkdownドキュメント（設計書やテスト仕様書など）から特定の要求IDを参照する場合は、定義したアンカーへのリンクを必ず作成します。これにより、ドキュメント間のトレーサビリティが確保されます。

```markdown
この設計は、要求[REQ-AUTH-1.1](../../01_要求仕様/01_機能要件/01_認証機能.md#REQ-AUTH-1.1)を実現する。
```

### 3.3. ソースコードとの連携

トレーサビリティはドキュメントだけに留まらず、ソースコードやテストコードまで及びます。機能の実装やテストがどの要求に基づいているかを明確にするため、関連するコード箇所に要求IDをコメント等で明記します。

具体的な記述方法は、各言語のコーディング規約で定められています。詳細は**[04.コーディング規定](../04_コーディング規定/README.md)**を参照してください。

**記述例:**

```csharp
// C#での実装例
// REQ-AUTH-1.2: アカウントロックのロジック
if (loginAttempts > MAX_ATTEMPTS) { ... }

// C# (xUnit) でのテスト例
[Fact]
[Requirement("REQ-AUTH-1.2")]
public void Should_LockAccount_WhenLoginAttemptsExceeded() { ... }
```

```python
# Pythonでの実装例
# REQ-API-2.1: ユーザー情報を返すAPI
def get_user_by_id(user_id: int) -> dict | None: ...

# Python (pytest) でのテスト例
@pytest.mark.requirement("REQ-API-2.1")
def test_get_user_by_id_returns_correct_user(): ...
```

## 4. Markdownの記述スタイル

### 4.1. 基本構造

各ドキュメントファイルは、一貫性と機械的な処理のしやすさを考慮し、以下の基本構造に従います。

```markdown
---
# (任意) このページのメタデータ (YAML Front Matter)
title: サイドバーに表示するカスタムタイトル
---

# (必須) H1見出し (ドキュメントタイトル)

この見出しが、ページ内で最も大きなタイトルとして表示されます。
```

- **Front Matter (任意):**
  - ページのタイトルを`mkdocs.yml`の`nav`で定義されたものから変更したい場合など、特別なメタデータを定義する場合にのみ使用します。
- **H1見出し (必須):**
  - 全てのドキュメントは、**Front
    Matterの直後（またはファイルの先頭）に、必ず`#`から始まるH1見出しを1つだけ**含める必要があります。

### 4.2. スタイルガイド

!!! info "コーディング規定への移管"
Markdownの具体的な記述スタイル（見出し、コードブロック、注釈など）に関する詳細なルールは、**[03.Markdown コーディング規約](../04_コーディング規定/05_設定ファイル/03_Markdown規約.md)**
に集約されています。ドキュメントを記述する際は、そちらを参照してください。

# 総則

本プロジェクトにおけるテスト全般の基本方針と用語、責務を定義します。

- 目的: 品質保証と回帰防止、安心して変更できる基盤の提供
- 範囲: 単体/結合/E2E/性能を含む全レイヤー
- 実行: ローカル/CIで自動化を基本とし、PR時の必須実行を徹底

## 共通原則

- 独立性: テストは相互依存しない（順序依存を避ける）
- 決定論: 何度実行しても同じ結果（外部要因は制御下に）
- 可読性: 何を/どの条件で/どうなるかが一目でわかる

## テストダブルの活用

- モック: 呼び出しの検証
- スタブ: 決められた戻り値を返す
- フェイク: 簡易実装（例: インメモリDB）

推奨ツール例: C# (Moq/NSubstitute), Python (unittest.mock/pytest-mock), TS/JS (Jest/Vitest/Sinon)

## 命名規則

- 形式: [対象メソッド]_[シナリオ]_[期待結果]
- 例: Sum_TwoPositiveNumbers_ReturnsCorrectSum / test_sum_with_negative_numbers_raises_exception

## AAAパターン

- Arrange: 準備（オブジェクト/データ/モック）
- Act: 実行（対象呼び出し）
- Assert: 検証（意図が明確なアサーション）

## アサーション

- 原則: 1テスト1アサーション（必要な場合は密接な性質のみ複数可）
- 具体APIの利用: `Equal/Throws/...` 等を優先

## 網羅観点

- ハッピーパス（正常系）
- エッジ（境界値、空/null、長大、特殊文字）
- エラー（例外、エラーコード/false）

# 04_ドキュメント規則

このドキュメントは、BitzBufferプロジェクトにおける全てのMarkdownドキュメントの作成、管理、および記述スタイルに関する共通の規則とガイドラインを定めます。
一貫性のある、質の高いドキュメントは、プロジェクトの理解を助け、開発効率を向上させ、将来のメンテナンスを容易にします。

## 1. ドキュメントの基本方針

*   **明確性:** ドキュメントは、対象読者が容易に理解できるよう、明確かつ簡潔な言葉で記述します。
*   **正確性:** 記述される情報は、常に最新かつ正確であるよう努めます。
*   **一貫性:** 用語、書式、構造などにおいて、プロジェクト全体で一貫性を保ちます。
*   **網羅性:** 必要な情報が過不足なく記述されていることを目指します。
*   **保守性:** 将来的な変更や更新が容易に行えるよう、構造化されたドキュメントを作成します。
*   **アクセシビリティ:** GitHub上での閲覧を基本とし、標準的なMarkdownレンダラで適切に表示されることを目指します。

## 2. ファイル形式と命名

*   **ファイル形式:** Markdown形式 (`.md`) を使用します。
*   **エンコーディング:** UTF-8 (BOMなし) を使用します。
*   **ファイル名/フォルダ名:**
    *   半角英数字、ハイフン (`-`)、アンダースコア (`_`)、ドット (`.`) を基本とします。
    *   日本語タイトルを持つファイルは、内容を識別しやすい番号付け (`01_`, `02_` など) で管理します。
    *   スペースや全角文字は原則として使用しません。
    *   各サブフォルダの概要を示すファイル名は `README.md` に統一します。
*   **フォルダ構成:** [`01.フォルダ構成`](./01_フォルダ構成.md) で定義されたフォルダ構造に従います。

## 3. Markdown記述スタイルガイド

### 3.1. 見出し (Headings)

*   最上位の見出しは `#` (H1) とし、ドキュメントのタイトルとして使用します。
*   セクションの見出しは `##` (H2)、サブセクションは `###` (H3) のように、階層構造を正しく使用します。
*   見出しの後には1行空行を入れることを推奨します。

### 3.2. コード表記 (Code)

*   インラインコードは、バッククォート (`` ` ``) で囲みます。例: `` `IBuffer<T>` ``
*   複数行のコードブロックは、トリプルバッククォート (`` ``` ``) で囲み、言語指定 (`csharp` など) をします。
    ```csharp
    public class MyClass
    {
        public void MyMethod() { /* ... */ }
    }
    ```

### 3.3. リンク (Links)

*   **ファイル間リンク:** 相対パスを使用します。例: `[コーディング規則](./05_コーディング規則.md)`
*   **ファイル内リンク (アンカーリンク):** `[表示テキスト](#見出し-id)` の形式を使用します。
*   **外部リンク:** 完全なURLを使用します。例: `[GitHub](https://github.com)`

### 3.4. その他

*   **リスト:** 順序なしは `-`、順序付きは `1.` を使用。
*   **強調:** イタリックは `*テキスト*`、ボールドは `**テキスト**`。
*   **表:** Markdownの標準的なテーブル構文を使用。

## 4. 特殊な記法と埋め込みコンテンツ

### 4.1. Mermaid図による図表表現

*   フローチャート、シーケンス図、クラス図などを記述する場合は、Mermaidを利用します。
*   ` ```mermaid ... ``` ` ブロックで囲んで記述します。
*   図には、内容を説明するキャプションをMarkdownのテキストとして図の直前または直後に追加することを推奨します。

## 5. ドキュメント間の連携とトレーサビリティ

プロジェクト内のドキュメント間のトレーサビリティを確保し、関連情報へのアクセスを容易にするため、以下の規約を設けます。

*   **5.1. 機能要件ID (FR-ID) の利用:**
    *   `../01.システム仕様書/` で定義される各機能要件には、一意のIDを付与します。
    *   **IDの基本フォーマット:** `FR-<カテゴリ略称>-<連番3桁>`
        *   **`FR`**: "Functional Requirement" の略。
        *   **`<カテゴリ略称>`**: 機能が属する主要なカテゴリを示す2～4文字のアルファベット。BitzBufferプロジェクトの構成に合わせて定義します。
            *   例: `CORE` (コアインターフェース), `MBUF` (マネージドバッファ), `NBUF` (ネイティブバッファ), `POOL` (プーリング), `MGR` (マネージャー/プロバイダ), `PIPE` (パイプラインコア), `TRAN` (トランスポート層) など。
        *   **`<連番3桁>`**: カテゴリ内で一意となる3桁の数字 (例: `001`)。
    *   **IDの具体例:** `FR-CORE-001` (IsOwnerプロパティの定義), `FR-MBUF-010` (SegmentedManagedBufferの実装)。
    *   機能要件IDの一覧や定義場所は、`../01.システム仕様書/` 配下の関連ドキュメントで管理します。
*   **5.2. アンカーの設定:**
    *   機能要件IDが定義されている箇所には、そのID名をアンカー名とするHTMLタグ `<a id="FR-CORE-001"></a>` を見出しの直前などに設定します。
*   **5.3. 相互リンク:**
    *   他のドキュメントから特定の機能要件IDを参照する場合は、必ずそのアンカーへのリンクを作成します。
        *   例: `[FR-CORE-001](../01.システム仕様書/03_機能要件.md#FR-CORE-001)` (ファイルパスは仮)
*   **5.4. 変更時の影響確認:**
    *   ある機能要件に変更があった場合、そのIDを参照している全てのドキュメントを確認し、必要に応じて修正します。

## 6. ドキュメントの更新とレビュー

*   ドキュメントは「生きている」ものであり、プロジェクトの進行や仕様変更に合わせて継続的に更新します。
*   ドキュメントの新規作成や大幅な変更は、原則としてプルリクエストを通じて行い、セルフレビューを経てマージします。（詳細は [`02_ブランチ戦略と命名規則.md`](./02_ブランチ戦略と命名規則.md) を参照）
*   定期的にドキュメント全体を見直し、情報の陳腐化や矛盾がないかを確認します。

## 7. その他

*   図や表には、可能な限り通し番号とキャプションを付与します。
*   三人称（「システムは～する」「利用者は～できる」）を基本とし、主観的な表現は避けます。
*   略語や専門用語を使用する場合は、初出時に正式名称と併記するか、用語集で定義します。

